<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>传输层和应用层 | XDU 953 House</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/leaf.ico">
    <link rel="stylesheet" href="/css/katex0.15.1.min.css">
    <script src="/js/katex0.15.1.min.js"></script>
    <script src="/js/jquery1.9.1.min.js"></script>
    <script src="/js/crypto.js"></script>
    <script src="/js/md5.js"></script>
    <link rel="stylesheet" href="/css/button.css">
    <meta name="description" content="片刻寧靜">
    
    <link rel="preload" href="/assets/css/0.styles.dee84450.css" as="style"><link rel="preload" href="/assets/js/app.464b2a28.js" as="script"><link rel="preload" href="/assets/js/2.f539a802.js" as="script"><link rel="preload" href="/assets/js/1.74843084.js" as="script"><link rel="preload" href="/assets/js/18.84ef48e2.js" as="script"><link rel="prefetch" href="/assets/js/10.921445e1.js"><link rel="prefetch" href="/assets/js/11.e4895d61.js"><link rel="prefetch" href="/assets/js/12.cba02928.js"><link rel="prefetch" href="/assets/js/13.b4fea8f9.js"><link rel="prefetch" href="/assets/js/14.eb0bf0f2.js"><link rel="prefetch" href="/assets/js/15.2f4cbb95.js"><link rel="prefetch" href="/assets/js/16.ca772779.js"><link rel="prefetch" href="/assets/js/17.1f24fd4d.js"><link rel="prefetch" href="/assets/js/19.f8969fd3.js"><link rel="prefetch" href="/assets/js/20.eac09a2e.js"><link rel="prefetch" href="/assets/js/21.0d2dbedb.js"><link rel="prefetch" href="/assets/js/22.cc515833.js"><link rel="prefetch" href="/assets/js/23.dd83e4f1.js"><link rel="prefetch" href="/assets/js/24.56d64ff8.js"><link rel="prefetch" href="/assets/js/25.1c0c1474.js"><link rel="prefetch" href="/assets/js/26.0a2297ed.js"><link rel="prefetch" href="/assets/js/27.5f1af55f.js"><link rel="prefetch" href="/assets/js/28.96a2e9b9.js"><link rel="prefetch" href="/assets/js/29.04313390.js"><link rel="prefetch" href="/assets/js/3.f3113a3f.js"><link rel="prefetch" href="/assets/js/30.7c04ffad.js"><link rel="prefetch" href="/assets/js/31.c10c8375.js"><link rel="prefetch" href="/assets/js/32.683356de.js"><link rel="prefetch" href="/assets/js/33.7269e8ba.js"><link rel="prefetch" href="/assets/js/34.7f4a41b2.js"><link rel="prefetch" href="/assets/js/35.2d2e1c38.js"><link rel="prefetch" href="/assets/js/36.9e5c5ff7.js"><link rel="prefetch" href="/assets/js/37.15da9b29.js"><link rel="prefetch" href="/assets/js/38.12fc08d8.js"><link rel="prefetch" href="/assets/js/39.6bb478b3.js"><link rel="prefetch" href="/assets/js/4.4d73d019.js"><link rel="prefetch" href="/assets/js/40.7bd5e9df.js"><link rel="prefetch" href="/assets/js/41.9992730b.js"><link rel="prefetch" href="/assets/js/42.b9ea5cbd.js"><link rel="prefetch" href="/assets/js/43.1830ed9e.js"><link rel="prefetch" href="/assets/js/44.e8fff894.js"><link rel="prefetch" href="/assets/js/45.81ab4634.js"><link rel="prefetch" href="/assets/js/46.819b1ad8.js"><link rel="prefetch" href="/assets/js/47.780e3064.js"><link rel="prefetch" href="/assets/js/48.86771a41.js"><link rel="prefetch" href="/assets/js/49.ff389619.js"><link rel="prefetch" href="/assets/js/5.f4693a95.js"><link rel="prefetch" href="/assets/js/50.2b8165da.js"><link rel="prefetch" href="/assets/js/51.536d1912.js"><link rel="prefetch" href="/assets/js/52.66e9128b.js"><link rel="prefetch" href="/assets/js/53.0607ace0.js"><link rel="prefetch" href="/assets/js/54.e44d762a.js"><link rel="prefetch" href="/assets/js/55.7ba6d36e.js"><link rel="prefetch" href="/assets/js/56.015bc6c9.js"><link rel="prefetch" href="/assets/js/57.6935f8e2.js"><link rel="prefetch" href="/assets/js/58.b7045388.js"><link rel="prefetch" href="/assets/js/6.f2c56be6.js"><link rel="prefetch" href="/assets/js/7.992cee86.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d63322e5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dee84450.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/error.jpg" alt="XDU 953 House" class="logo"> <span class="site-name can-hide">XDU 953 House</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/ds/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/cn/" class="nav-link router-link-active">
  计算机网络
</a></div><div class="nav-item"><a href="/crypto/" class="nav-link">
  密码学
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/ds/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/cn/" class="nav-link router-link-active">
  计算机网络
</a></div><div class="nav-item"><a href="/crypto/" class="nav-link">
  密码学
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cn/basics/computer-network-outline-physical.html" class="sidebar-link">计网体系结构和物理层</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据链路层</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>网络层</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/cn/basics/computer-network-transport-application.html" aria-current="page" class="active sidebar-link">传输层和应用层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#传输层功能" class="sidebar-link">传输层功能</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#udp" class="sidebar-link">UDP</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#tcp" class="sidebar-link">TCP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#首部格式和功能" class="sidebar-link">首部格式和功能</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#连接的建立和释放" class="sidebar-link">连接的建立和释放</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#流量控制" class="sidebar-link">流量控制</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#拥塞控制" class="sidebar-link">拥塞控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#应用层" class="sidebar-link">应用层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#网络应用模型" class="sidebar-link">网络应用模型</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#域名系统" class="sidebar-link">域名系统</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#文件传输协议" class="sidebar-link">文件传输协议</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#邮件传输协议" class="sidebar-link">邮件传输协议</a></li><li class="sidebar-sub-header"><a href="/cn/basics/computer-network-transport-application.html#超文本传输协议" class="sidebar-link">超文本传输协议</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TCP/IP Socket in C</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="传输层功能">传输层功能</h2> <p>传输层只在资源子网，即互联网的边缘部分存在，核心部分的通讯只依靠于下三层网络协议，下三层的传输在前面的总结中已经说的很清楚了，已经完全支持数据在网络之间的定向传输（之事不可靠）</p> <h2 id="udp">UDP</h2> <p>在数据部分前添加首部 8B</p> <img src="/assets/img/image-20230703184754458.7a457d20.png"> <p>在 IP 分组的基础上加入端口功能，将连接的主体由主机细化到进程，注意这里的虽然是在“基础上”，但其功能的实现在数据报的“内部”，即 IP 分组拆开后，识别到 UDP 首部，才可实现这里的分用功能</p> <p>注意：实现分用的是目的端口，实现复用的是源端口</p> <h2 id="tcp">TCP</h2> <h3 id="首部格式和功能">首部格式和功能</h3> <p>首部长度和 IP 分组的长度设计完全一致，首部以 4B 为单位计量，总长度按字节为单位</p> <ul><li>固定长度 20B</li> <li>可变长度 0-40B</li></ul> <p>也就是说 TCP 报文和 IP 分组的首部长度一定在 20-60B 之间，整个 TCP 数据报的最大长度为 65535B（IP 分组同理）</p> <p>TCP 提供可靠的全双工信道</p> <ul><li>可靠指无差错、不丢失、不重复且有序：通过序号、确认和重传实现</li> <li>全双工信道其实可以理解为两条信道，这在释放连接的时候显得十分明显，即发送端发送一个 FIN 只代表自身不发送（但可接收），只有当两端均发送了 FIN 且被确认后，这条全双工信道才被销毁</li></ul> <p>MSS（Max Segment Size）：指一个数据报的最大的总长度</p> <p>RTT（Round Trip Time）：指一次发送和一次确认的时间，即数据报的一次往返时间</p> <p>TCP 重要的首部字段</p> <ul><li>序号：表示当前传输的 TCP 报文数据部分的字节起始序号</li> <li>确认号（ack）：表示期望收到的下一个数据字节序号</li> <li>确认位（ACK）：标志确认号的有效，当 ACK = 0 时，确认号无效</li> <li>终止位（FIN）：用以终止连接，表示当前端口停止发送数据</li> <li>同步位（SYN）：当连接愿意建立后 SYN 始终为 1，只有 SYN = 1 时数据才能被正常传输</li> <li>窗口：指明当前端的接收窗口大小，参与限制发送窗口的大小（流量控制）</li></ul> <h3 id="连接的建立和释放">连接的建立和释放</h3> <p>首部中，序号和确认号，确认位、终止位和开始位，一起合作控制 TCP 连接的建立和释放</p> <ul><li>确认号传输的是序号，指明下一个想要收到的数据报文的起始序号</li></ul> <p>三次握手</p> <img src="/assets/img/image-20230703190237078.e81e15e0.png"> <p>注意每个站点的 seq 都是独立的，即互不影响，在建立连接时，二者开始的 seq 几乎也是随意取值，只是注意确认报文的确认号一定和上一条收到的报文的序号以及有效数据长度有关</p> <p>这里两个 seq 实际上可以视作两条信道的有序保持者，seq1 保证 A 到 B 的数据报有序，seq2 保证 B 到 A 的数据报有序</p> <ul><li>这里的时间名称记一下，有个印象，考过</li></ul> <p>四次挥手：双方主动告知对方自己不再发送数据，当双方均确认对方不再发送数据后，连接断开</p> <img src="/assets/img/image-20230703190443358.08f0d9fd.png"> <p>同样的，这里的时间段名称也留个印象，主动关闭的主机发送最后一个确认信号后将等待两个 MSL 后才关闭</p> <p>MSL（Max Segment Life）：数据报最大的存活时间</p> <img src="/assets/img/image-20230703192534390.93c4882d.png"> <h3 id="流量控制">流量控制</h3> <p>流量控制和拥塞控制的区别，流量控制是针对端和端来说的，由接收方单纯的控制发送方，并不会影响到其他的端口；而拥塞控制是针对整个网络而言，即出现拥塞不单单是当前 TCP 连接的两端的问题，也就是说，当网络出现拥塞，每个连接都将无法幸免</p> <p>其控制的原理基本相同：通过限制发送方的流量，降低信道（网络）拥塞程度，流量控制把发送方窗口锁死，而拥塞控制动态的调整发送窗口大小</p> <h3 id="拥塞控制">拥塞控制</h3> <blockquote><p>慢开始，拥塞避免 —— 基于冗余 ACK ——&gt; 快重传，快恢复</p></blockquote> <p>首先要明确的是
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>发送窗口</mtext><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">{</mo><mtext>接收窗口</mtext><mo separator="true">,</mo><mtext></mtext><mtext>拥塞窗口</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">
发送窗口 = min\{接收窗口,\,拥塞窗口\}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">发送窗口</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">{</span><span class="mord cjk_fallback">接收窗口</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">拥塞窗口</span><span class="mclose">}</span></span></span></span></span></eqn></section>
cwnd（Congestion Window）：拥塞窗口</p> <p>慢开始：慢指的是 cwnd 大小从 1 开始，但他是指数增长的，每经过一轮 RTT，他的窗口大小将乘以 2（没经过一个数据报的确认，窗口大小 +1，每个 RTT 将有 cwnd 个数据报被确认）</p> <p>拥塞避免：维护一个阈值 ssthresh（手动初始化），当 cwnd 达到 ssthresh 后，每轮 RTT 后，cwnd 增加一个（在时间轴上线性增长）</p> <p>当碰到拥塞时（确认报超时），将 ssthresh 降为 cwnd 的二分之一，同时将 cwnd 置为，开始慢开始算法</p> <ul><li>会碰到这样的情况，如<code>ssthresh = 6, cwnd = 4</code>，根据慢开始算法，下一轮 RTT 时，cwnd 应乘以 2 为 8，但这里统一认为 cwnd 始终不会超过 ssthresh，故下一轮 cwnd = 6，然后开始执行拥塞避免算法</li></ul> <p>冗余确认：当发送方连续收到三个确认号一样的数据报时，即认为发生了冗余确认，我们认为此时网络发生了拥塞或传输出现了错误</p> <p>快重传：当发生冗余确认后，无需等待超时，直接重发三个冗余确认中携带的确认号序号的数据报文，从这个中断点开始有序传输</p> <p>快恢复：在拥塞避免算法遇到拥塞时，有
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mfrac><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><mn>2</mn></mfrac><mo separator="true">,</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">
ssthresh = \frac{cwnd}{2}, cwnd = 1
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">ss</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></eqn></section>
在采用快恢复时，转换变成了这样
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mfrac><mrow><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><mn>2</mn></mfrac><mo separator="true">,</mo><mi>c</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">
ssthresh = \frac{cwnd}{2}, cwnd = ssthresh
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">ss</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">ss</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span></span></span></span></span></eqn></section>
然后开始继续执行拥塞避免算法，cwnd 随时间线性增加</p> <p>这里有一个确认数据报延迟的问题</p> <img src="/assets/img/image-20230703192728759.88d19e06.png"> <p>可以轻松得到当前发送窗口大小为 2000B，但注意此时发送端只收到了一个确认段，也就是说有 1000B 的数据还未确认，故此时只能发送 1000B 的数据，选 A</p> <img src="/assets/img/image-20230703192851201.af971260.png"> <img src="/assets/img/image-20230703192905323.2e193284.png"> <p>同样的，此时发送窗口为接收窗口 500B（拥塞窗口未知，只能这么认为），只收到了 501 的确认报，没收到刚刚发出去的<code>seq-501, length=200B</code>的确认报，所以现在只能发送 500-200=300B 的数据报，并且是接着 500+200=700 的序号发送，选 C</p> <p>有时，窗口大小 cwnd 按照字节来计量，此时需要直到 MMS 大小，认为窗口中最多含有 cwnd / MMS 个数据报</p> <h2 id="应用层">应用层</h2> <p>常见协议及其服务所使用的熟知端口</p> <img src="/assets/img/image-20230705002649395.5d7b5f0d.png"> <p>一般应用层为了可靠传输，都使用 TCP 作为下层的传输协议，常见的除了 DNS，使用 UDP 数据报</p> <p>但注意，即使是使用 TCP 协议，也不一定是一个面向连接的协议，如 HTTP1.0，他把 TCP 当 UDP 用的，多少沾点</p> <h3 id="网络应用模型">网络应用模型</h3> <blockquote><p>C/S，B/S，P2P</p></blockquote> <p>P2P 模型是一个另类的 C/S 架构，当连接建立之后，客户和服务的界限变得模糊，两台主机同时作为客户和服务端进行工作，这样会带来一些安全问题，以及对网络拥塞有非常大的贡献 U•ェ•*U</p> <img src="/assets/img/image-20230704224233826.06b7c113.png"> <p>在 C/S 架构中，客户机是面向用户的，服务器是面向任务的，一般来说，在做分发任务时，P2P 的效率要高于 C/S 架构</p> <h3 id="域名系统">域名系统</h3> <blockquote><p>DNS，信息传输基于 UDP</p></blockquote> <p>域名系统组成</p> <ul><li>层次域名空间</li> <li>域名服务器</li> <li>域名解析器</li></ul> <p>域名的层次结构</p> <img src="/assets/img/image-20230705001347898.7bac63e8.png"> <p>域名服务器</p> <ul><li>根服务器：管理顶级域名</li> <li>顶级域名服务器：管理二级域名</li> <li>权限域名服务器：管理下级服务器</li> <li>本地域名服务器：管理本区域所有主机的域名</li></ul> <p>其中本地域名服务器和权限域名服务器应该是平级的，只是看待他们的主体不同</p> <p>域名的递归查询和迭代查询</p> <img src="/assets/img/image-20230704224329592.2d8461c5.png"> <p>域名和 IP 绝对不是一一对应的，比如很多域名指向同一 IP 地址（可以多对一，一对一，但不可以一对多）</p> <p>栗题 x2</p> <img src="/assets/img/image-20230705001049916.6d94c35f.png"> <p>一定要注意解析域名只是数据传输的第一步，拿到 IP 后才正式开始数据传输</p> <p>这题真没懂，选尼玛 C，我选的 A</p> <img src="/assets/img/image-20230705001232422.2064b15e.png"> <img src="/assets/img/image-20230705001249299.985a1169.png"> <h3 id="文件传输协议">文件传输协议</h3> <blockquote><p>FTP，纯纯的基于 TCP</p></blockquote> <p>控制和传输分<strong>两个端口</strong>进行，又叫带外传送（一定要记牢端口号）</p> <ul><li>20 端口用于控制连接</li> <li>21 端口用于数据连接</li></ul> <p>两个端口均指服务端口，也就是说客户端并不遵守这一要求，可以是任意端口；同时这两个端口均基于 TCP 连接进行数据信息传输</p> <p>其中，控制连接囊括整个 FTP 传输过程，而数据连接会在数据传输结束后及时关闭（但此时 FTP 连接不一定关闭）</p> <ul><li>就像使用 WinSCP 的时候，连接服务器用的是 20 端口，在文件上传的时候才会用到 21 端口（不传输时 21 端口空闲），不传输但也可以一直挂在后台，控制连接和数据连接相对独立</li></ul> <p>匿名访问 FTP 服务器时使用 anonymous 作为用户名</p> <p>举俩栗题</p> <img src="/assets/img/image-20230705000930157.33301233.png"> <img src="/assets/img/image-20230705000951232.5a1dc961.png"> <h3 id="邮件传输协议">邮件传输协议</h3> <blockquote><p>SMTP 和 POP3 协议，前者用于 push，后者用于 pull，均基于 TCP 报文传输</p></blockquote> <p>在客户端发送给邮件服务器和邮件服务器之间传输时，使用 SMTP，在服务器传输给客户时使用 POP3 协议</p> <img src="/assets/img/image-20230705001832792.dba1d37c.png"> <p>注意所有的邮件传输协议在传输数据时，都将数据转化为 ASCII 字符再最终转化为比特流在链路中传输，这叫做<strong>多用途网络邮件扩充(MIME)</strong>，目的是用于发送多媒体信息而不是简单的文本</p> <h3 id="超文本传输协议">超文本传输协议</h3> <blockquote><p>HTTP：HTTP1.0 仅支持无连接的传输，HTTP1.1 支持有连接的传输</p> <p>注意无论是有连接还是无连接，均基于 TCP 进行数据传输</p></blockquote> <p>HTTP 本身是无连接的，但他的传输是基于有连接的 TCP 协议（有点像上面的 FTP 的数据传输端口，不用时关闭，用时打开）</p> <p>这样的基于 TCP 的<strong>无连接传输</strong>非常之蠢，比如你要请求一个 html 页面，这个页面上有 100 个图片，由于无连接的缘故，TCP 连接需要建立和释放 101 次（100 次用于传输图片，1 次用于传输 html 页面）</p> <ul><li>而有连接的 HTTP 不存在这种情况</li></ul> <p>统一资源定位符：和 IP 地址或者域名做一个区分，这里是加上资源的，比如<code>39.106.160.174</code>这是一个 IP，<code>39.106.160.174:8080</code>这是一个传输层端口，而<code>39.106.160.174:8080/index.html</code>就是一个 URL</p> <p>Cookie：用服务器发送给客户并存储在客户机上的一小串字符，用以标记客户访问过本服务的一些信息</p> <img src="/assets/img/image-20230705002538903.6d109e6d.png"> <p>GET 和 POST 就不多说了，都是请求资源，前者把请求项写在 url 中，后者通过表单传输参数</p> <p>HEAD 主要功能用于测试，不需要服务器返回请求对象</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/28/2023, 11:05:33 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cn/basics/computer-network-ipv4.html" class="prev">
        IPv4
      </a></span> <span class="next"><a href="/cn/socket/socket-tcp.html">
        TCP Sockets
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/song/aries.aac" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:44px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/error.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/error.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>白羊</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>northboat</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><!----><div class="RibbonAnimation"></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:99;" data-v-248d85d6></canvas></div></div></div>
    <script src="/assets/js/app.464b2a28.js" defer></script><script src="/assets/js/2.f539a802.js" defer></script><script src="/assets/js/1.74843084.js" defer></script><script src="/assets/js/18.84ef48e2.js" defer></script>
  </body>
</html>
